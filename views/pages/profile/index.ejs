<%- include("../../partials/head.ejs") %>
    <body id="page-top">
        <div id="wrapper">
            <%- include("../../partials/sidebar.ejs") %>
                <div id="content-wrapper" class="d-flex flex-column">
                    <div id="content">
                        <%- include("../../partials/topbar.ejs") %>
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-xl-4">
                                        <!-- Profile picture card-->
                                        <div class="card mb-4 mb-xl-0">
                                            <div class="card-header">Logo da empresa</div>
                                            <div class="card-body text-center">
                                                <!-- Profile picture image-->
                                                <img src="<%=user.data.info.profile.logo%>" id="logoPreview" width="200" height="200" class="rounded mx-auto d-block"
                                                    alt="Prévia da logo">
                                                <div class="custom-file">
                                                    
                
                                                    <input type="file" onchange="previewFile()" class="custom-file-input" id="logoInput"
                                                        required accept="image/png, image/jpg">
                                                    <label class="custom-file-label" id="labelEnd" for="logoPreview"
                                                        data-browse="Procurar arquivo">Logotipo da empresa em PNG, recomendado 400x400, não maior que 5mb</label>
                                          
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-8">
                                        <!-- Account details card-->
                                        <div class="card mb-4">
                                            <div class="card-header">Detalhes da Conta</div>
                                            <div class="card-body">
                                                <form method="POST">
                                                    <!-- Form Group (username)-->
                                                    <div class="mb-3">
                                                        <label class="small mb-1" for="inputUsername">CNPJ</label>
                                                        <input class="form-control" id="inputUsername" type="text" placeholder="Número do CNPJ" value="<%=user.data.info.documents.cnpj%>" disabled>
                                                    </div>
                                                    <!-- Form Row-->
                                                    <div class="row gx-3 mb-3">
                                                        <!-- Form Group (first name)-->
                                                        <div class="col-md-6">
                                                            <label class="small mb-1" for="inputFirstName">Nome Fantasia</label>
                                                            <input class="form-control" id="inputFirstName" type="text" placeholder="Enter your first name" value="<%=user.data.info.documents.nome_fantasia%>" disabled>
                                                        </div>
                                                        <!-- Form Group (last name)-->
                                                        <div class="col-md-6">
                                                            <label class="small mb-1" for="inputLastName">Nome Completo do dono</label>
                                                            <input class="form-control" id="inputLastName" name="ownerName" type="text" placeholder="Nome completo" value="<%=user.data.info.profile.ownerName%>">
                                                        </div>
                                                    </div>
                                                    <!-- Form Row        -->
                                                    <div class="row gx-3 mb-3">
                                                        <!-- Form Group (location)-->
                                                        <div class="col-md-6">
                                                            <label class="small mb-1" for="inputLocation">Localização da sede</label>
                                                            <input class="form-control" id="inputLocation" name="mainLocation" type="text" placeholder="Cidade, estado" value="<%=user.data.info.profile.mainLocation%>">
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label class="small mb-1" for="inputPhone">Celular</label>
                                                            <input class="form-control" id="inputPhone" name="phone" type="tel" placeholder="Número de contato" value="<%=user.data.info.profile.phone%>">
                                                        </div>
                                                    </div>
                                                    <!-- Form Group (email address)-->
                                                    <div class="mb-3">
                                                        <label class="small mb-1" for="inputEmailAddress">E-mail</label>
                                                        <input class="form-control" id="inputEmailAddress" type="email" placeholder="Enter your email address" value="<%=user.data.info.email%>" disabled>
                                                    </div>
                                                    <input type="text" name="logoSrc" class="form-control" id="compbase64" value="<%=user.data.info.profile.logo%>"
                                        style="display: none;">
                                                    <!-- Save changes button-->
                                                    <button class="btn btn-primary" type="submit">Salvar mudanças</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                    <%- include("../../partials/footer.ejs") %>
                </div>
        </div>
        <a class="scroll-to-top rounded" href="#page-top">
            <i class="fas fa-angle-up"></i>
        </a>
        <%- include("../components/modal/logout.ejs") %>
        <script>
            function previewFile(type) {
                const preview = document.getElementById("logoPreview"),
                    file = document.getElementById("logoInput").files[0];
    
                const reader = new FileReader();
    
                if (file.size > 5e+7) {
                    alert("O arquivo é muito grande, selecione outro!");
                    document.getElementById("logoInput").value = ''
                    return;
                }
    
                reader.addEventListener("load", () => {
                    preview.src = reader.result;
                    document.getElementById("labelEnd").innerText = document.getElementById("logoPreview").value
                    document.getElementById("compbase64").value = reader.result
                }, false);
                if (file) {
                    reader.readAsDataURL(file);
                }
            }
        </script>
            <script src="/vendor/jquery/jquery.min.js"></script>
            <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
            <script src="/vendor/jquery-easing/jquery.easing.min.js"></script>
            <script src="/js/sb-admin-2.min.js"></script>
    </body>
    </html>